{% extends 'base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1>{{ title }}</h1>

        {% if etablissements|length > 0 %}
            <div class="row mb-3">
                <div class="col">
                    <p>{{ etablissements|length }} établissement(s) trouvé(s)</p>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>UAI</th>
                            <th>Nom</th>
                            <th>Type</th>
                            <th>Commune</th>
                            <th>Département</th>
                            <th>Secteur</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for etablissement in etablissements %}
                        <tr>
                            <td>{{ etablissement.numeroUai }}</td>
                            <td>{{ etablissement.appellationOfficielle }}</td>
                            <td>{{ etablissement.denominationPrincipale }}</td>
                            <td>
                                <a href="{{ path('app_etablissement_by_commune', {'codeCommune': etablissement.codeCommune}) }}">
                                    {{ etablissement.commune }}
                                </a>
                            </td>
                            <td>
                                <a href="{{ path('app_etablissement_by_departement', {'codeDepartement': etablissement.codeDepartement}) }}">
                                    {{ etablissement.departement }}
                                </a>
                            </td>
                            <td>{{ etablissement.secteur }}</td>
                            <td>
                                <a href="{{ path('app_etablissement_show', {'id': etablissement.id}) }}" class="btn btn-sm btn-primary">Détails</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="alert alert-info">Aucun établissement trouvé.</div>
        {% endif %}
        
        <div class="mt-3">
            <a href="{{ path('app_etablissement_index') }}" class="btn btn-secondary">Retour à la liste complète</a>
        </div>
    </div>
{% endblock %}
